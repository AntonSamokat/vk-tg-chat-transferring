# Chats module

Это модуль для работы с супергруппами. Пользователь должен являться их создателем (администратором).

## Список чатов

```bash
$ ./main.py chats list
```

Выведет список чатов, в которых вы состоите, и их id.

Полученные id не совсем настоящие: библиотека Pyrogram модифицирует их и приводит
к [своему формату](https://docs.pyrogram.org/topics/advanced-usage?highlight=For+example#chat-ids).
Использовать их напрямую где-либо ещё не получится.

## Установить фото чата

Подставив id чата и путь до фотографии, выполните

```bash
$ ./main.py chats set-photo <CHAT_ID> --photo <PHOTO_PATH> 
```

## Заблокировать отправку сообщений

Подставив id чата, выполните

```bash
$ ./main.py chats mute <CHAT_ID> 
```

## Разрешить отправку сообщений

Подставив id чата, выполните

```bash
$ ./main.py chats unmute <CHAT_ID> 
```

## Добавить пользователей в чат

Подставив id чата, выполните

```bash
$ ./main.py chats invite <CHAT_ID> 
```

Эта команда добавит в чат пользователей, указанных в файле с контактами `contacts_mapping.yaml`.
В случае ошибки в консоль выведется список пользователей, которых добавить не удалось.

### Дополнительные опции

```
--contacts PATH       Путь до файла с сохранёнными контактами
```

## Создать супергруппу

### Базовое использование

Рекомендуемый вариант запуска

```bash
$ ./main.py chats create --use-history --photo --mute --invite
```

Создаст супергруппу с именем и фото, как у оригинального чата vk, заблокирует отправку сообщений и добавит всех
собеседников из файла контактов.
Выведет id созданной супергруппы в консоль.

### Создание супергруппы с использованием истории чата vk

Выполните

```bash
$ ./main.py chats create --use-history
```

Команда создаст супергруппу с именем, как у оригинального чата vk, и выведет её id в консоль.

#### Дополнительные опции

```
--use-history [PATH]  Использовать информацию об оригинальном чате vk. Если не указан файл, используется vk_history.pickle
--title TITLE         Устаносить имя супергруппы. Переопределяет имя оригинального чата vk
--photo [PATH]        Установить фото супергруппы. Если не указан файл, используется фото оригинального чата vk
--invite [PATH]       Добавить пользователей в супергруппу. Если не указан файл, список пользователей берётся из contacts_mapping.yaml
--mute                Заблокировать отправку сообщений в супергруппу
```

### Создание супергруппы без использования истории чата vk

Подставив имя новой супергруппы, выполните

```bash
$ ./main.py chats create --title <TITLE>
```

Команда создаст супергруппу с указанным именем и выведет её id в консоль.

#### Дополнительные опции

```
--title TITLE         Устаносить имя супергруппы
--photo PATH          Установить фото супергруппы
--invite [PATH]       Добавить пользователей в супергруппу. Если не указан файл, список пользователей берётся из contacts_mapping.yaml
--mute                Заблокировать отправку сообщений в супергруппу
```
